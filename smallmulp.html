<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <!-- jquery -->
    <script src="./lib/jQuery/jquery-1.11.2.min.js"></script>
    <!-- bootstrap -->
    <script src="./lib/bootstrap/bootstrap.min.js"></script>
    <link rel="stylesheet" href="./lib/bootstrap/bootstrap.min.css">
    <link rel="stylesheet" href="./lib/bootstrap/bootstrap.min.css.map">
    <!-- d3 -->
    <script src="http://d3js.org/d3.v3.min.js"></script>
    <style type="text/css">
        .form-control-xxx {
            width: 200px;
            display: inline;
        }

        #imagegallery {
            padding-left: 24px;
        }

        #imagegallery li {
            list-style-type: none;
        }

        #imagegallery li {
            display: inline;
        }

        #imagegallery img {
            border: 1px black solid;
            width: 240px;
            height: 240px;
        }

        #imagegallery img#selected {
            border: 1px #FF0000 solid;
        }

        .slider {
            stroke: #000;
            fill: #FFF;
        }

        .selectedrect {
            stroke: #000;
            fill: #FF0000;
        }

        .overrect {
            stroke: #000;
            fill: #00FF00;
        }
    </style>



</head>

<body>
        <input id="survey" value="react" style='display:none'>
    <div  class="row">

        <div  class="col-md-9 col-md-offset-2">

            <div id="first_row" class="panel panel-info">
                <div class="panel-heading">
                    <h3 class="panel-title">Small Multiples</h3>
                </div>
                <div id="body" class="panel-body">
                    <ul id="imagegallery">
                        <li>
                            <img id="m1" title="t1" src="allimages/1.png" />
                        </li>
                        <li>
                            <img id="m2" title="t2" src="allimages/2.png" />
                        </li>
                        <li>
                            <img id="m3" title="t3" src="allimages/3.png" />
                        </li>
                        <li>
                            <img id="m4" title="t4" src="allimages/4.png" />
                        </li>
                        <li>
                            <img id="m5" title="t5" src="allimages/5.png" id="selected" />
                        </li>
                    </ul>

                    <ul id="imagegallery">
                        <li>
                            <img id="m6" title="t6" src="allimages/6.png" />
                        </li>
                        <li>
                            <img id="m7" title="t7" src="allimages/7.png" />
                        </li>
                        <li>
                            <img id="m8" title="t8" src="allimages/8.png" />
                        </li>
                        <li>
                            <img id="m9" title="t9" src="allimages/9.png" />
                        </li>
                        <li>
                            <img id="m10" title="t10" src="allimages/10.png" />
                        </li>
                    </ul>
                </div>
            </div>



        </div>

    </div>
    <div class="row">

    </div>

   <div class="row">
    <div class="col-md-6 col-md-offset-3">

      <div class="panel panel-success">
        <div class="panel-heading">
          <h3 class="panel-title">Question</h3>
        </div>
        <div class="panel-body">
          <button id="start" type="button" class="btn btn-primary">Start</button>
          <button id="submit" type="button" class="btn btn-success">Submit</button>
          <span>The answer time of each question：60s</span>
          <div id="progress_div" class="progress" style="width:600px;display:none">

            <div id="progress" class="progress-bar progress-bar-danger" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100"
              style="width: 0%;">
              <span class="sr-only">90% 完成（成功）</span>
            </div>
          </div>
          <div id="panel_group">

          </div>
        </div>
      </div>


            <!-- <div id ="panel" class="panel panel-primary" style="display:none"> -->
            <!-- <div class="panel-heading">
                    <h3 class="panel-title">问题XXX</h3>
                </div>
                <div class="panel-body">
                    <div id="question">
                        <span>题目：</span>123123123213123</div>
                    <div id="answer" style="display:none">
                        <span>选项：</span>
                        <div class="btn-group" data-toggle="buttons">
                            <label class="btn btn-default ">
                                <input type="radio" name="options"> Option 1
                            </label>
                            <label class="btn btn-default ">
                                <input type="radio" name="options"> Option 2
                            </label>
                            <label class="btn btn-default ">
                                <input type="radio" name="options"> Option 3
                            </label>
                            <label class="btn btn-default ">
                                <input type="radio" name="options"> Option 3
                            </label>
                        </div>
                    </div>
                </div>
                <div class="panel-footer">
                    <button type="button" class="btn btn-success">提交答案</button>
                </div> -->


            <!-- </div> -->

        </div>
        <textarea id="jsonInputField" type="text" style="display: none;">
            {
    "title": "动态协作关系可视化调查问卷",
    "children": [
        {
            "class": "when",
            "children": [
                {
                    "id": 1,
                    "item": 1,
                    "question": "When does entity 4 disappear?",
                    "answer": "t20",
                    "options": [
                        "t12",
                        "t20",
                        "t36",
                        "None of the above",
                        "Too difficult"
                    ]
                },
                
                {
                    "id": 2,
                    "item": 2,
                    "question": "How long does activity 10 last?",
                    "answer": "15",
                    "options": [
                        "15",
                        "12",
                        "18",
                        "None of the above",
                        "Too difficult"
                    ]
                },
                {
                    "id": 3,
                    "item": 3,
                    "question": "Which of activities 11 and 12 started first?",
                    "answer": "11",
                    "options": [
                        "11",
                        "12",
                        "The same time",
                        "None of the above",
                        "Too difficult"
                    ]
                }
            ]
        },
        {
            "class": "what",
            "children": [
                {
                    "id": 4,
                    "item": 1,
                    "question": "Is entity 7 related to 9 under t40?",
                    "answer": "No",
                    "options": [
                        "No",
                        "Yes",
                        "",
                        "None of the above",
                        "Too difficult"
                    ]
                },
                {
                    "id": 5,
                    "item": 2,
                    "question": "What happens to entity 3 during t34 to t35?",
                    "answer": "More entities interacting with it",
                    "options": [
                        "More entities interacting with it",
                        "Less entities interacting with it",
                        "No changes",
                        "None of the above",
                        "Too difficult"
                    ]
                },
                {
                    "id": 6,
                    "item": 3,
                    "question": "Does the relationship between entity 5 and entity 9 change during the entire process?",
                    "answer": "No",
                    "options": [
                        "No",
                        "Yes",
                        "",
                      "None of the above",
                        "Too difficult"
                    ]
                }
            ]
        },
        {
            "class": "where",
            "children": [
                {
                    "id": 7,
                    "item": 1,
                    "question": "Which activity does entity 12 participate in at t58?",
                    "answer": "17",
                    "options": [
                        "15",
                        "16",
                        "17",
                       "None of the above",
                        "Too difficult"
                    ]
                },
                {
                    "id": 8,
                    "item": 2,
                    "question": "How many activities does entity 6 participate in?",
                    "answer": "10",
                    "options": [
                        "9",
                        "10",
                        "11",
                        "None of the above",
                        "Too difficult"
                    ]
                },
                {
                    "id": 9,
                    "item": 3,
                    "question": "What are the activities in parallel with activity 18 in time?",
                    "answer": "Activity 19 and 20",
                    "options": [
                        "Activity 16 and 17",
                        "Activity 17 and 19",
                        "Activity 19 and 20",
                        "None of the above",
                        "Too difficult"
                    ]
                },
                {
                    "id": 10,
                    "item": 4,
                    "question": "Are the number of entities involved in activity 10 the same as the number involved in activity 13?",
                    "answer": "Yes",
                    "options": [
                        "No",
                        "Yes",
                        "",
                       "None of the above",
                        "Too difficult"
                    ]
                }
            ]
        },
        {
            "class": "Comination",
            "children": [
                {
                    "id": 11,
                    "item": 1,
                    "question": "At the beginning of activity 19, how many entities are related to entity 10?",
                    "answer": "7",
                    "options": [
                        "7",
                        "8",
                        "9",
                        "None of the above",
                        "Too difficult"
                    ]
                },
                {
                    "id": 12,
                    "item": 2,
                    "question": "When entity 4 disappears, how many activities just have begun?",
                    "answer": "3",
                    "options": [
                        "1",
                        "2",
                        "3",
                        "None of the above",
                        "Too difficult"
                    ]
                }
            ]
        }
    ]
}
        </textarea>
    </div>
    <script src="./src/zhb.js"></script>
    <script>
        var width = 1300;
        var height = 45;
        var margin = 2;
        var picNum = 95;
        var per_wid = width / (picNum + 1);
        var pic_wid = per_wid - margin;
        var pic_hgt = 10;
        var buttonTimeStep = [];
        for (var i = 1; i <= picNum; i++) {
            buttonTimeStep[i] = i;
        }

        var svg = d3.select("#first_row").insert("svg","#body")
            .attr("width", width)
            .attr("height", height);
        //rects-timestep
        svg.selectAll("rect.slider")
            .data(buttonTimeStep)
            .enter()
            .append("rect")
            .attr("class", "slider")
            .attr("x", function (d, i) {
                return i * per_wid;
            })
            .attr("y", 20)
            .attr("width", pic_wid)
            .attr("height", pic_hgt)
            //		.attr("stroke", "black")
            //		.attr("fill", "white")
            .on("click", rectSelected);
        //text
        buttonTimeStep.forEach(function (d, i) {
            svg.append("text")
                .attr("x", i * per_wid - 2)
                .attr("y", 40)
                .attr("stroke", "black")
                .style("font-size", "10px")
                .text(function () {
                    if (i % 5 == 0)
                        return "t" + d;
                });
        })
        //rect-selected
        function rectSelected(d, i) {

            d3.selectAll("rect")
                .data(buttonTimeStep)
                .attr("class", "slider");
            //修改
            d3.selectAll(".imgshow")
                .remove();

            d3.select(this).attr("class", "selectedrect");

            //rect of all rect of showing images
            svg.append("rect")
                .attr("class", "imgshow")
                .attr("x", (i - 4) * per_wid)
                .attr("y", 17)
                .attr("width", 10 * per_wid)
                .attr("height", pic_hgt + 6)
                .attr("stroke", "blue")
                .attr("fill", "none");
            //change the img's src
            document.getElementById("m1").src = "allimages/" + (i - 4) + ".png";
            document.getElementById("m2").src = "allimages/" + (i - 3) + ".png";
            document.getElementById("m3").src = "allimages/" + (i - 2) + ".png";
            document.getElementById("m4").src = "allimages/" + (i - 1) + ".png";
            document.getElementById("m5").src = "allimages/" + i + ".png";
            document.getElementById("m6").src = "allimages/" + (i + 1) + ".png";
            document.getElementById("m7").src = "allimages/" + (i + 2) + ".png";
            document.getElementById("m8").src = "allimages/" + (i + 3) + ".png";
            document.getElementById("m9").src = "allimages/" + (i + 4) + ".png";
            document.getElementById("m10").src = "allimages/" + (i + 5) + ".png";
            //change the img's title,the title show the timestep
            document.getElementById("m1").title = "t" + (i - 4);
            document.getElementById("m2").title = "t" + (i - 3);
            document.getElementById("m3").title = "t" + (i - 2);
            document.getElementById("m4").title = "t" + (i - 1);
            document.getElementById("m5").title = "t" + i;
            document.getElementById("m6").title = "t" + (i + 1);
            document.getElementById("m7").title = "t" + (i + 2);
            document.getElementById("m8").title = "t" + (i + 3);
            document.getElementById("m9").title = "t" + (i + 4);
            document.getElementById("m10").title = "t" + (i + 5);
        }
    </script>
    <!-- <script src="./src/write_answer.js"></script> -->
</body>

</html>